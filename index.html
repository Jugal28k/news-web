<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEWS REPORT</title> 

    <!--Bootstrap icons-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
     
 
 
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
 
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav class="nav"> 
        <div class="logo-image">
            <img src="WhatsApp Image 2024-03-18 at 10.14.15.jpeg" alt="COMPANY LOGI" onclick="reload()">
        </div>
        
        <div class="nav-links" id="nav-links">
            <ul>
                <li class="hover-item nav-item" id="sports" onclick="NAV('sports')">SPORTS</li> <!--HERE WE ARE CREATING A ONCLICK FUNCTION : AND IN BETWEEN WE ARE PASSING THESE IDS -->
                <li class="hover-item nav-item" id="finance" onclick="NAV('finance')">FINANCE</li>
                <li class="hover-item nav-item" id="politics" onclick="NAV('politics')">POLITICS</li> 
                <li class="hover-item nav-item" id="technology" onclick="NAV('technology')">TECHNOLOGY</li>                
            </ul>
        </div>

        <div class="search-bar">
            <div class="style"id="search-button">
                <input type="text" class="news-input" placeholder="Enter Type Of News" id="input">
                <button class="search-button">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                        <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"/>
                    </svg>
                </button>
            </div>
        </div>

        <div class="nav_button" id="toggle-btn">
            <i class="bi bi-list" ></i>
        </div>
        <ul class="show">
            <li class="hover-item nav-item" id="sports" onclick="NAV('sports')"><a href="#">SPORTS</a></li> <!--HERE WE ARE CREATING A ONCLICK FUNCTION : AND IN BETWEEN WE ARE PASSING THESE IDS -->
            <li class="hover-item nav-item" id="finance" onclick="NAV('finance')"><a href="#">FINANCE</a></li>
            <li class="hover-item nav-item" id="politics" onclick="NAV('politics')"><a href="#">POLITICS</a></li> 
            <li class="hover-item nav-item" id="technology" onclick="NAV('technology')"><a href="#">TECHNOLOGY</a></li>                
        </ul>
    </nav>




    <main>
        <div class="cards-container container" id="card-container-list">
            <!--TEMPLATE : through js -->
        </div>
    </main>


    <!--TEMPLATE -->
    <template id="template-news-card">
        <div class="card">
            <div class="card-header">
                <img src="https://via.placeholder.com/400x200" alt="news" id="news-img">
            </div>
            <div class="card-content">
                <h3 id="news-title">This is the title</h3>
                <h6 id="news-source" >End Gadget 26/08/2023</h6>
                <p class="news-desc" id="news-desc">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Fugit ducimus blanditiis similique ipsa explicabo quidem aut? Saepe perferendis doloremque quos?</p>
            </div>
        </div>
    </template>

    

    <script >const API_KEY = "869eea51f808485284e8d3d7ef06752f" ;
const url = "https://newsapi.org/v2/everything?q=" ;

window.addEventListener('load',() => fetchNews("india")) ; // by defalut when window gets load it should fetch and display the news of India

async function fetchNews(e) {
    const response = await fetch(`${url}${e}&apikey=${API_KEY}`); // here we are completing the full url link and fetching data : url , location_of_news_required , api_key ;
    const data = await response.json() ;
    console.log(data) ;
    bindData(data.articles) ; //1)  The bindData function is responsible for handling the display or processing of news articles fetched from an API. It typically takes an array of article objects as input and performs tasks such as rendering them on a webpage, logging them to the console, or any other form of presentation or manipulation desired by the developer.
}

function bindData(articles) { //1) this will create n number of templates that we are fetching
    const x = document.getElementById("card-container-list") ;
    const news_Card_Template = document.getElementById("template-news-card") ;

    x.innerHTML= "" ; //2) Now First If upar agar already 100 cards daal rakhe hae and then humne new_cards_ aur bna diye den repetion problem occur hoo jae gi
    // 3) Now we will make loop upto n number of cards to create new cards and then in 4) we will display those cards 
    

    articles.forEach( element => {       // 4) Element contains the whole data of the object 
        if(!element.urlToImage)  return ;// this is the code that checks if the article does not contain the image then skip that article
        let card_Clone_Template = news_Card_Template.content.cloneNode(true) // chatgpt : 
        
        //4) Fill data in cards 
        fill_Data_innerHTML_UPDATION(card_Clone_Template, element) ;
        
        //5) Append cloned cards 
        x.appendChild(card_Clone_Template) ;
    });
}


function fill_Data_innerHTML_UPDATION(card_Clone_Template, element) {

    let LI_news_image = card_Clone_Template.querySelector('#news-img') ;
    let LI_news_Title = card_Clone_Template.querySelector('#news-title') ;
    let LI_news_Source = card_Clone_Template.querySelector("#news-source") ;
    let LI_news_Desc = card_Clone_Template.querySelector('#news-desc') ;
    
     // where LI_news_ .... => represents the cloned childs in html , & they are going to show the pair daya by pointing towards the keys of the object
    LI_news_image.src = element.urlToImage ;
    LI_news_Title.innerHTML = element.title ;
    LI_news_Desc.innerHTML = element.description;

    //LI_news_Source.innerHTML = element.source.name ; // THIS LINE WILL ALSO CONTAIN DATE 
    // in this function below we have converted the date to normal format : 
    const date = new Date(element.publishedAt).toLocaleString("en-US", {
        timeZone: "Asia/Jakarta" ,
    }) ;

    LI_news_Source.innerHTML = `${element.source.name} : ${date}` ;
    //  NOW THIS LINE WRITTEN ABOVE WILL PRINT the name of the source 1st and then the date along with the time




    // 6) CREATING ONCLICK FUNCTION ON CARD CLONED 
    // in this case we will fetch the link present inside of the article that we are fetching from NEWS_API 
    card_Clone_Template.firstElementChild.addEventListener("click", () => {
        window.open(element.url, "_blank") ; // now : _blank is ued to open new tab ,  and element.url will give us the original link of the news (card) on which the user clicks ...
    })
}


//7) HANDELING NAVIGATION : 
let current_selected_nav = null ;
function NAV(id) {
    fetchNews(`${id} india`) ;  //THIS WILL GIVE THE NEWS OF INDIA : 
    const nav_item = document.getElementById(id) ;
    current_selected_nav?.classList.remvoe('active') ; // if any other navitem slecetd : remove current active class
    current_selected_nav = nav_item ; // now current points towards new navitem selected
    current_selected_nav.classList.add('actve') ;
}

//8) HANDELING SEARCH BAR 
let searchButton = document.getElementById("search-button") ;
let input = document.getElementById("input") ;
searchButton.addEventListener('click', ()=> {
    let x = input.value ;
    if(!x) {
        return ;
    }
    fetchNews(x) ;
    // updating current selected 
    // current_selected_nav? this is the condition to check that if there is a item present in current selected or not 
    current_selected_nav?.classList.remove('active') ;
    current_selected_nav = null;
})



//9) reload 
function reload() {
    window.location.reload() ;
}









// NAV BUTTON 
document.getElementById("toggle-btn").addEventListener('click', () => {
    let elements = document.getElementsByClassName("show");

    for (let i = 0; i < elements.length; i++) {
        elements[i].classList.toggle("dropdown");
        // Toggle "dropdown" on some other element if needed
        // Example:
        // document.getElementById("some-dropdown-element").classList.toggle("dropdown");
    }
});
</script>
</body>
</html>
